package com.services.ConfigService.config;

import org.springframework.core.convert.Property;
import org.springframework.jdbc.core.ResultSetExtractor;
import org.springframework.jdbc.core.RowMapper;

import com.services.ConfigService.entities.ConfigProperty;
import com.services.ConfigService.services.PropertyService;

import java.sql.ResultSet;
import java.sql.SQLException;
import java.util.ArrayList;
import java.util.List;

public class CustomPropertiesResultSetExtractor implements ResultSetExtractor<List<Property>> {
    
    private final PropertyService propertyService;

    public CustomPropertiesResultSetExtractor(PropertyService propertyService) {
        this.propertyService = propertyService;
    }

    @Override
    public List<Property> extractData(ResultSet rs) throws SQLException {
        List<Property> properties = new ArrayList<>();
        while (rs.next()) {
            // Construct Property object based on your DB schema
            Property property = new Property(null, null, null);
            property.setApplication(rs.getString("key"));
            property.setValue(rs.getString("value"));
            // Set other fields as necessary
            properties.add(property);
        }
        return properties;
    }
}

